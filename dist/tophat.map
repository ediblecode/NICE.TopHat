{"version":3,"file":"tophat.js","sources":["tophat.dev.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","css","customDocument","doc","document","createStyleSheet","cssText","head","getElementsByTagName","style","createElement","type","styleSheet","appendChild","createTextNode","byUrl","url","link","rel","href",2,"getTophatConfig","config","tag","getTophatScriptTag","len","attributes","key","value","getAttribute","evidence","service","accountsUrl","generateAccountsUrl","legacy","isLegacy","currentScript","tags","src","toLowerCase","indexOf","env","environment","accountsDomain","accountsDomains","navigator","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","local",3,"search","label","title","bnf","bnfc","cks","journals",4,"pathways","guidance","standards",5,"tophatEvents","tophatElement","serviceElement","add","addEventListener","prefix","internal","tophatClassname","StateControl","forElement","attachTophatEvents","attachDomEvent","proxy","clickhandler","cancelhandler","trackingHandler","searchHandler","ev","target","srcElement","validateTrackedElement","className","undefined","parentNode","category","labelEl","utils","find","action","textContent","innerText","innerHTML","window","location","cleanClass","this","preventDefault","sendTrackedEvent","isTrackedElement","nodeName","validateTarget","mustIgnoreEvent","state","toggleEvidence","toggleProfile","toggleSearch","isValid","isTophatElement","unfocus","el","tophatEvent","q","placeholder","term","escape","replace","cb","setTimeout","dataLayer","push","sendDataLayerEvent","_gaq","sendGAEvent","ga","sendUAEvent","logEventToConsole","data","event","eventCategory","eventAction","eventLabel","console","log","fn","enhance","context","_stopPropagation","stopPropagation","_preventDefault","cancelBubble","returnValue","../utils/dom","./states",6,"TophatStates","element","classname","cleanClassname","getStateFromClassname","evidenceStateClassname","profile","profileStateClassname","searchStateClassname","prototype","updateState",7,"generateEvidenceElement","appendElement","create","tophatEvidenceService","linklist","generateLinkList","evidenceLinks","tophatEvidence","active","links","isBeta","output","id","generateLink","join","tophatEvidenceLinks","beta","../config/evidence","../templates/evidence/links.html","../templates/evidence/menu.html","../templates/evidence/service.html",8,"generateProfileElement","tophatProfileAnon","xhr","get","tophatProfileEndpoint","wtrealm","display_name","generateProfile","generateAnonProfile","disableProfile","anonitem","profilenav","tophatProfileService","profileLink","setAttribute","thumbnail","menu","tophatProfile","insertBeforeElement","remove","lastChild","tophatProfileLinks","../templates/profile/anon.html","../templates/profile/links.html","../templates/profile/menu.html","../templates/profile/service.html","../utils/xhr",9,"generateGlobalElement","tophatGlobal","../templates/root.html",10,"generateSearchElement","globalElement","tophatSearchService","params","parseQueryStringWithRegExp","view","tophatSearch","typeaheadtype","typeaheadsource","searchElement","addSearchToGlobal","searchForm","firstChild","decodeURIComponentExtended","decodeURIComponent","extendParam","obj","name","val","existing","query","match","substring","../templates/search/form.html","../templates/search/service.html",11,"generateServiceElement","cleanUp","serviceLinks","generateServiceBar","services","tophatServices","home","tophatServicesLinks","oldElement","removeChild","../config/services","../templates/services/links.html","../templates/services/menu.html",12,13,14,15,16,17,18,19,20,21,22,23,24,"/Users/matt/Documents/branches/NICE.Tophat/node_modules/cssify",25,"getTophatElement","body","composeTophat","evidenceResources","globalMenu","prependElement","evidenceElement","onTophatReady","./config","./events","./evidence","./profile","./root","./search","./services","./tophat.css","./utils/dom",26,"root","nativeGetElementsByClassName","getElementsByClassName","polyfilGetElementsByClassName","elements","pattern","d","results","querySelectorAll","evaluate","iterateNext","test","html","wrapper","parent","insertBefore","sibling",27,"resolve","script","Math","floor","random","done","onload","onreadystatechange","readyState","_na","./dom"],"mappings":"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"}