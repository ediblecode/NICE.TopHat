{"version":3,"file":"tophat.js","sources":["tophat.dev.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","css","customDocument","doc","document","createStyleSheet","cssText","head","getElementsByTagName","style","createElement","type","styleSheet","appendChild","createTextNode","byUrl","url","link","rel","href",2,"getTophatConfig","config","tag","getTophatScriptTag","len","attributes","key","value","getAttribute","evidence","service","accountsUrl","generateAccountsUrl","legacy","isLegacy","currentScript","tags","src","toLowerCase","indexOf","env","environment","accountsDomain","accountsDomains","navigator","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","local",3,"/Users/matt/Documents/branches/NICE.Tophat/node_modules/cssify",4,"tophatEvents","tophatElement","serviceElement","add","addEventListener","prefix","internal","tophatClassname","StateControl","forElement","attachTophatEvents","attachDomEvent","proxy","clickhandler","cancelhandler","trackingHandler","searchHandler","ev","target","srcElement","validateTrackedElement","className","undefined","parentNode","category","labelEl","utils","find","action","textContent","innerText","innerHTML","label","window","location","cleanClass","this","preventDefault","sendTrackedEvent","isTrackedElement","nodeName","validateTarget","mustIgnoreEvent","state","toggleEvidence","toggleProfile","toggleSearch","isValid","isTophatElement","unfocus","el","tophatEvent","placeholder","q","alert","term","escape","replace","cb","setTimeout","dataLayer","push","sendDataLayerEvent","_gaq","sendGAEvent","ga","sendUAEvent","logEventToConsole","data","event","eventCategory","eventAction","eventLabel","eventValue","console","log","fn","enhance","context","_stopPropagation","stopPropagation","_preventDefault","cancelBubble","returnValue","./tophat.states","./tophat.utils",5,6,"generateEvidenceElement","appendElement","create","tophatEvidenceService","linklist","generateLinkList","evidenceLinks","tophatEvidence","active","links","isBeta","output","id","generateLink","join","tophatEvidenceLinks","title","beta","./tophat.evidence.html","./tophat.evidence.links","./tophat.evidence.links.html","./tophat.evidence.service.html",7,8,"search","bnf","bnfc","cks","journals",9,10,11,"generateGlobalElement","tophatGlobal","./tophat.global.html",12,"getTophatElement","classname","body","composeTophat","services","evidenceResources","globalMenu","prependElement","evidenceElement","globalElement","onTophatReady","./tophat.config.js","./tophat.css","./tophat.events","./tophat.evidence","./tophat.global","./tophat.profile","./tophat.search","./tophat.services",13,14,15,"generateProfileElement","profile","tophatProfileAnon","xhr","get","tophatProfileEndpoint","display_name","generateProfile","disableProfile","anonitem","profilenav","tophatProfileService","profileLink","setAttribute","thumbnail","menu","tophatProfile","insertBeforeElement","remove","lastChild","tophatProfileLinks","./tophat.profile.anon.html","./tophat.profile.html","./tophat.profile.links.html","./tophat.profile.service.html","./tophat.xhr",16,17,18,19,"generateSearchElement","tophatSearchService","params","parseQueryStringWithRegExp","view","tophatSearch","typeaheadtype","typeaheadsource","searchElement","addSearchToGlobal","searchForm","firstChild","decodeURIComponentExtended","decodeURIComponent","extendParam","obj","name","val","existing","query","match","substring","./tophat.search.html","./tophat.search.service.html",20,21,22,"generateServiceElement","cleanUp","serviceLinks","generateServiceBar","tophatServices","home","tophatServicesLinks","oldElement","removeChild","./tophat.services.html","./tophat.services.links","./tophat.services.links.html",23,24,"pathways","guidance","standards",25,"TophatStates","element","cleanClassname","getStateFromClassname","evidenceStateClassname","profileStateClassname","searchStateClassname","prototype","updateState",26,"root","nativeGetElementsByClassName","getElementsByClassName","polyfilGetElementsByClassName","elements","pattern","d","results","querySelectorAll","evaluate","iterateNext","test","html","wrapper","parent","insertBefore","sibling",27,"resolve","script","Math","floor","random","done","onload","onreadystatechange","readyState","_na"],"mappings":"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"}