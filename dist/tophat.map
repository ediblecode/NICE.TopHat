{"version":3,"file":"tophat.js","sources":["tophat.dev.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","css","customDocument","doc","document","createStyleSheet","cssText","head","getElementsByTagName","style","createElement","type","styleSheet","appendChild","createTextNode","byUrl","url","link","rel","href",2,"getTophatConfig","config","tag","getTophatScriptTag","len","attributes","key","value","getAttribute","evidence","service","accountsUrl","generateAccountsUrl","legacy","isLegacy","currentScript","tags","src","toLowerCase","indexOf","env","environment","accountsDomain","accountsDomains","navigator","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","local",3,"/Users/matt/Documents/branches/NICE.Tophat/node_modules/cssify",4,"tophatEvents","tophatElement","serviceElement","add","addEventListener","prefix","internal","tophatClassname","StateControl","forElement","attachTophatEvents","attachDomEvent","proxy","clickhandler","cancelhandler","trackingHandler","ev","target","srcElement","validateTrackedElement","className","undefined","parentNode","preventDefault","category","labelEl","utils","find","action","textContent","innerText","innerHTML","label","window","location","cleanClass","this","sendTrackedEvent","isTrackedElement","nodeName","validateTarget","mustIgnoreEvent","state","toggleEvidence","toggleProfile","toggleSearch","isValid","isTophatElement","unfocus","el","tophatEvent","cb","_gaq","push","sendGAEvent","ga","sendUAEvent","console","log","setTimeout","data","hitCallback","replace","fn","event","enhance","context","_stopPropagation","stopPropagation","_preventDefault","cancelBubble","returnValue","./tophat.states","./tophat.utils",5,6,"generateEvidenceElement","appendElement","create","tophatEvidenceService","linklist","generateLinkList","evidenceLinks","tophatEvidence","active","links","isBeta","output","id","generateLink","join","tophatEvidenceLinks","title","beta","./tophat.evidence.html","./tophat.evidence.links","./tophat.evidence.links.html","./tophat.evidence.service.html",7,8,"search","bnf","bnfc","cks","journals",9,10,11,"generateGlobalElement","tophatGlobal","./tophat.global.html",12,"getTophatElement","classname","body","composeTophat","services","evidenceResources","globalMenu","prependElement","evidenceElement","globalElement","onTophatReady","./tophat.config.js","./tophat.css","./tophat.events","./tophat.evidence","./tophat.global","./tophat.profile","./tophat.search","./tophat.services",13,14,15,"generateProfileElement","profile","tophatProfileAnon","xhr","get","tophatProfileEndpoint","display_name","generateProfile","disableProfile","anonitem","profilenav","tophatProfileService","profileLink","setAttribute","thumbnail","menu","tophatProfile","insertBeforeElement","remove","lastChild","tophatProfileLinks","./tophat.profile.anon.html","./tophat.profile.html","./tophat.profile.links.html","./tophat.profile.service.html","./tophat.xhr",16,17,18,19,"generateSearchElement","tophatSearchService","view","tophatSearch","typeaheadtype","typeaheadsource","searchElement","addSearchToGlobal","searchForm","firstChild","./tophat.search.html","./tophat.search.service.html",20,21,22,"generateServiceElement","cleanUp","serviceLinks","generateServiceBar","tophatServices","home","tophatServicesLinks","oldElement","removeChild","./tophat.services.html","./tophat.services.links","./tophat.services.links.html",23,24,"pathways","guidance","standards",25,"TophatStates","element","cleanClassname","getStateFromClassname","evidenceStateClassname","profileStateClassname","searchStateClassname","prototype","updateState",26,"root","nativeGetElementsByClassName","getElementsByClassName","polyfilGetElementsByClassName","elements","pattern","d","results","querySelectorAll","evaluate","iterateNext","test","html","wrapper","parent","insertBefore","sibling",27,"resolve","script","Math","floor","random","done","onload","onreadystatechange","readyState","_na"],"mappings":"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"}