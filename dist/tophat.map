{"version":3,"file":"tophat.js","sources":["tophat.dev.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","css","customDocument","doc","document","createStyleSheet","cssText","head","getElementsByTagName","style","createElement","type","styleSheet","appendChild","createTextNode","byUrl","url","link","rel","href",2,"getTophatConfig","config","tag","getTophatScriptTag","len","attributes","key","value","getAttribute","evidence","service","accountsUrl","generateAccountsUrl","legacy","isLegacy","currentScript","tags","src","toLowerCase","indexOf","env","environment","accountsDomain","accountsDomains","navigator","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","local",3,"/Users/matt/Documents/branches/NICE.Tophat/node_modules/cssify",4,"tophatEvents","tophatElement","serviceElement","add","addEventListener","prefix","internal","tophatClassname","StateControl","forElement","attachTophatEvents","attachDomEvent","proxy","clickhandler","cancelhandler","trackingHandler","searchHandler","ev","target","srcElement","validateTrackedElement","className","undefined","parentNode","category","labelEl","utils","find","action","textContent","innerText","innerHTML","label","window","location","cleanClass","this","preventDefault","sendTrackedEvent","isTrackedElement","nodeName","validateTarget","mustIgnoreEvent","state","toggleEvidence","toggleProfile","toggleSearch","isValid","isTophatElement","unfocus","el","tophatEvent","q","placeholder","term","escape","replace","cb","setTimeout","dataLayer","push","sendDataLayerEvent","_gaq","sendGAEvent","ga","sendUAEvent","logEventToConsole","data","event","eventCategory","eventAction","eventLabel","console","log","fn","enhance","context","_stopPropagation","stopPropagation","_preventDefault","cancelBubble","returnValue","./tophat.states","./tophat.utils",5,6,"generateEvidenceElement","appendElement","create","tophatEvidenceService","linklist","generateLinkList","evidenceLinks","tophatEvidence","active","links","isBeta","output","id","generateLink","join","tophatEvidenceLinks","title","beta","./tophat.evidence.html","./tophat.evidence.links","./tophat.evidence.links.html","./tophat.evidence.service.html",7,8,"search","bnf","bnfc","cks","journals",9,10,11,"generateGlobalElement","tophatGlobal","./tophat.global.html",12,"getTophatElement","classname","body","composeTophat","services","evidenceResources","globalMenu","prependElement","evidenceElement","globalElement","onTophatReady","./tophat.config.js","./tophat.css","./tophat.events","./tophat.evidence","./tophat.global","./tophat.profile","./tophat.search","./tophat.services",13,14,15,"generateProfileElement","profile","tophatProfileAnon","xhr","get","tophatProfileEndpoint","wtrealm","display_name","generateProfile","disableProfile","anonitem","profilenav","tophatProfileService","profileLink","setAttribute","thumbnail","menu","tophatProfile","insertBeforeElement","remove","lastChild","tophatProfileLinks","./tophat.profile.anon.html","./tophat.profile.html","./tophat.profile.links.html","./tophat.profile.service.html","./tophat.xhr",16,17,18,19,"generateSearchElement","tophatSearchService","params","parseQueryStringWithRegExp","view","tophatSearch","typeaheadtype","typeaheadsource","searchElement","addSearchToGlobal","searchForm","firstChild","decodeURIComponentExtended","decodeURIComponent","extendParam","obj","name","val","existing","query","match","substring","./tophat.search.html","./tophat.search.service.html",20,21,22,"generateServiceElement","cleanUp","serviceLinks","generateServiceBar","tophatServices","home","tophatServicesLinks","oldElement","removeChild","./tophat.services.html","./tophat.services.links","./tophat.services.links.html",23,24,"pathways","guidance","standards",25,"TophatStates","element","cleanClassname","getStateFromClassname","evidenceStateClassname","profileStateClassname","searchStateClassname","prototype","updateState",26,"root","nativeGetElementsByClassName","getElementsByClassName","polyfilGetElementsByClassName","elements","pattern","d","results","querySelectorAll","evaluate","iterateNext","test","html","wrapper","parent","insertBefore","sibling",27,"resolve","script","Math","floor","random","done","onload","onreadystatechange","readyState","_na"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,MAAM,IAAIK,OAAM,uBAAuBL,EAAE,KAAK,GAAIM,GAAET,EAAEG,IAAIO,WAAYX,GAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGO,QAAkD,IAAI,GAA1CH,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQQ,GAC9aA,EAAOJ,QAAU,SAAUK,EAAKC,GAC9B,GAAIC,GAAMD,GAAkBE,QAC5B,IAAID,EAAIE,iBACNF,EAAIE,mBAAmBC,QAAUL,MAC5B,CACL,GAAIM,GAAOJ,EAAIK,qBAAqB,QAAQ,GACxCC,EAAQN,EAAIO,cAAc,QAE9BD,GAAME,KAAO,WAETF,EAAMG,WACRH,EAAMG,WAAWN,QAAUL,EAE3BQ,EAAMI,YAAYV,EAAIW,eAAeb,IAGvCM,EAAKM,YAAYJ,KAIrBT,EAAOJ,QAAQmB,MAAQ,SAASC,GAC9B,GAAIZ,SAASC,iBACXD,SAASC,iBAAiBW,OACrB,CACL,GAAIT,GAAOH,SAASI,qBAAqB,QAAQ,GAC7CS,EAAOb,SAASM,cAAc,OAElCO,GAAKC,IAAM,aACXD,EAAKE,KAAOH,EAEZT,EAAKM,YAAYI,UAIfG,GAAG,SAAS5B,EAAQQ,GAO1B,QAASqB,KACL,GAAIC,MAEAC,EAAMC,GACV,IAAID,EACA,IAAK,GAAI9B,GAAI,EAAGgC,EAAMC,EAAW5B,OAAY2B,EAAJhC,EAASA,IAAM,CACpD,GAAIkC,GAAMD,EAAWjC,GACjBmC,EAAQL,EAAIM,aAAc,QAAUF,EAEnCC,IAAmB,KAAVA,IACVN,EAAQK,GAAQC,GAU5B,MALIN,GAAOQ,WAAUR,EAAOS,QAAU,YAEtCT,EAAOU,YAAcC,EAAqBX,GAC1CA,EAAOY,OAASC,IAETb,EAGX,QAASE,KACL,GAAID,GAAMnB,SAASgC,aACnB,IAAIb,EAAK,MAAOA,EAIhB,KAAM,GAFFc,GAAOjC,SAASI,qBAAsB,UAEhCf,EAAI,EAAGgC,EAAMY,EAAKvC,OAAY2B,EAAJhC,EAASA,IAAM,CAC/C,GAAI6C,GAAMD,EAAK5C,GAAG6C,IAAIC,aAEtB,KAAQD,EAAIE,QAAQ,eAAmBF,EAAIE,QAAQ,iBAC/C,MAAOH,GAAK5C,IAKxB,QAASwC,GAAqBX,GAC1B,GAAImB,IAAOnB,EAAOoB,aAAe,QAAQH,cACrCI,EAAiBC,EAAgBH,IAAQ,YAAuB,SAARA,EAAiBA,EAAM,IAAM,IAAO,sBAEhG,OAAOE,GAGX,QAASR,KAGL,GAA0B,+BAArBU,UAAUC,QAA2C,CACtD,GAAIC,GAAKF,UAAUG,UACfC,EAAM,GAAIC,QAAO,6BACrB,IAAqB,OAAhBD,EAAGE,KAAKJ,GACT,MAAmC,KAA5BK,WAAYF,OAAOG,IAIlC,OAAO,EA9DX,GAAI3B,IAAe,UAAW,WAAY,cAAe,YAAa,SAAU,gBAAiB,kBAAmB,WAAY,OAAQ,WAEpIkB,GACAU,MAAS,wBA8DbtD,GAAOJ,QAAUyB,OAEXkC,GAAG,SAAS/D,EAAQQ,GAC1B,GAAIC,GAAM,qmdAAwmdT,GAAQ,kEAAmES,GAAMD,EAAOJ,QAAUK,IACjtduD,iEAAiE,IAAIC,GAAG,SAASjE,EAAQQ,GAM5F,QAAS0D,GAActD,EAAUuD,EAAeC,EAAgBtC,GAC5DuC,EAAMzD,EAAS0D,iBAAmB,mBAAqB,cACvDC,EAAS3D,EAAS0D,iBAAmB,GAAK,KAEtCxC,EAAO0C,WACPC,GAAmB,kBAGvBC,EAAaC,WAAYR,GAEzBS,EAAoBhE,EAAUuD,GAGlC,QAASS,GAAoBhE,EAAUuD,GACnCU,EAAgBV,EAAe,QAASW,EAAOX,EAAeY,IAC9DF,EAAgBjE,EAAU,QAASkE,EAAOX,EAAea,IACzDH,EAAgBV,EAAe,QAASW,EAAOX,EAAec,IAC9DJ,EAAgBV,EAAe,SAAUW,EAAOX,EAAee,IAQnE,QAASD,GAAiBE,GAGtB,IAFA,GAAIC,GAASD,EAAGC,QAAUD,EAAGE,YAEpBC,EAAwBF,IAAW,CAExC,IAAMA,EAAOG,UAAUvC,QAAS,eAAkB,CAC9CoC,EAASI,MACT,OAGJJ,EAASA,EAAOK,WAGpB,GAAI9D,GAAOyD,IAAYA,EAAOzD,MAAQyD,EAAOpE,qBAAqB,KAAK,GAAGW,KAE1E,IAAKyD,GAAWzD,EAAhB,CAEA,GAAI+D,GAAW,SACXC,EAAYC,EAAMC,KAAMT,EAAQ,cAAe,IAAMA,EACrDU,EAASH,EAAQI,aAAeJ,EAAQK,WAAaL,EAAQM,UAC7DC,EAAQC,OAAOC,SAASzE,IAE5B,QAAS0E,EAAYjB,EAAOG,YACxB,IAAK,eACDO,EAAS,iBAAmBQ,KAAKf,UAAUvC,QAASoC,EAAOG,UAAY,SAAY,YAAc,eACjG5D,GAAO,CACP,MAEJ,KAAK,gBACL,IAAK,cACDmE,IAAYQ,KAAKf,UAAUvC,QAASoC,EAAOG,UAAY,SAAY,YAAc,cACjF5D,GAAO,EAIfwD,EAAGoB,iBAEHC,EAAkBd,EAAUI,EAAQI,EAAO,WACnCvE,IAAMwE,OAAOC,SAASzE,KAAOA,MAIzC,QAAS2D,GAAwBF,GAC7B,GAAIqB,GAAmBrB,GACmB,OAAlCA,EAAOsB,SAAS3D,iBACbqC,EAAOG,UAAUvC,QAAS,WAAcoC,EAAOG,UAAUvC,QAAS,aAE7E,SAASyD,EAMb,QAAS1B,GAAcI,GAGnB,IAFA,GAAIC,GAASD,EAAGC,QAAUD,EAAGE,WAErBsB,EAAgBvB,IAAW,CAE/B,IAAMA,EAAOG,UAAUvC,QAAS,eAAkB,CAC9CoC,EAASI,MACT,OAGJJ,EAASA,EAAOK,WAGpB,GAAImB,KAAqBxB,KAAYA,EAAOG,UAAUvC,QAAS,eAC/D,KAAI4D,EAIJ,OAFAzB,EAAGoB,iBAEMF,EAAYjB,EAAOG,YACxB,IAAK,gBACDe,KAAKO,MAAMC,gBACX,MAEJ,KAAK,eACDR,KAAKO,MAAME,eACX,MAEJ,KAAK,cACDT,KAAKO,MAAMG,gBAKvB,QAASL,GAAgBvB,GACrB,GAAI6B,GAAU7B,KACJA,EAAOG,UAAUvC,QAAS,oBAC1BoC,EAAOG,UAAUvC,QAAS,kBAC1BoC,EAAOG,UAAUvC,QAAS,eAEpC,SAASiE,EAMb,QAASjC,GAAeG,GACpB,GAAIC,GAASD,EAAGC,QAAUD,EAAGE,UAExB6B,GAAiB9B,IAEtBkB,KAAKO,MAAMM,UAGf,QAASD,GAAiBE,GAItB,IAHA,GAAIC,IAAc,EACdjC,EAASgC,EAELhC,GAAS,CACb,GAAKA,EAAOG,YAAcH,EAAOG,UAAUvC,QAAS,eAAkB,CAClEqE,GAAc,CACd,OAGJjC,EAASA,EAAOK,WAGpB,MAAO4B,GAMX,QAASnC,GAAeC,GACpB,GAAIC,GAASD,EAAGC,QAAUD,EAAGE,UAE7B,IAAKD,EAAOG,YAAcH,EAAOG,UAAUvC,QAAS,iBAC3CoC,EAAOU,OAAO9C,QAAS,UAAaoC,EAAOkC,EAAI,CAEpD,GAAIC,GAAcnC,EAAOkC,EAAEjF,aAAa,eACpCiF,EAAIlC,EAAOkC,EAAElF,MACboF,EAASF,IAAMC,EAAgBE,OAAQH,EAAEI,QAAQ,MAAO,MAAS,GACjEtB,EAAWhB,EAAOU,OAAO4B,QAAQ,UAAWF,EAEhDhB,GAAkB,SAAUgB,EAAMpB,EAAU,WACxCD,OAAOC,SAASzE,KAAOyE,IAG3BjB,EAAGoB,kBASX,QAASC,GAAkBd,EAAUI,EAAQI,EAAOyB,GAKhD,MAJIA,IACAxB,OAAOyB,WAAYD,EAAI,IAGtBxB,OAAO0B,WAA8C,kBAA1B1B,QAAO0B,UAAUC,KACxCC,EAAoBrC,EAAUI,EAAQI,GAG1CC,OAAO6B,MAAoC,kBAArB7B,QAAO6B,KAAKF,KAC9BG,EAAavC,EAAUI,EAAQI,GAGd,kBAAdC,QAAO+B,GACRC,EAAazC,EAAUI,EAAQI,OAG1CkC,GAAmB1C,EAAUI,EAAQI,GAGzC,QAAS6B,GAAoBrC,EAAUI,EAAQI,GAC7C,GAAImC,IACFC,MAAO,UACPC,cAAe7C,EACf8C,YAAa1C,EACb2C,WAAYvC,EAGdC,QAAO0B,UAAUC,KAAMO,GAGzB,QAASJ,GAAavC,EAAUI,EAAQI,GACpC,GAAImC,IAAS,cAAe3C,EAAUI,EAAQI,EAE9CC,QAAO6B,KAAKF,KAAMO,GAGtB,QAASF,GAAazC,EAAUI,EAAQI,GACpC,GAAImC,IACA3C,SAAUA,EACVI,OAAQA,EACRI,MAAOA,EAGXC,QAAO+B,GAAI,OAAQ,QAASG,GAGhC,QAASD,GAAmB1C,EAAUI,EAAQI,GAC1C,GAAIwC,GAAUvC,OAAOuC,OAEhBA,IAAWA,EAAQC,KACpBD,EAAQC,IAAK,QAASjD,EAAUI,EAAQI,GAShD,QAASG,GAAYd,GACjB,MAAOA,GAAUmC,QAAQ,UAAW,IAGxC,QAAS7C,GAAgBuC,EAAIjC,EAAIyD,GAC7BxB,EAAG/C,GAAME,EAASY,EAAI,SAAUmD,GAAUM,EAAIC,EAASP,MAAc,GA0BzE,QAASxD,GAAOgE,EAASF,GACrB,MAAO,UAAUzD,GACbyD,EAAGvI,KAAMyI,EAAS3D,IAI1B,QAAS0D,GAASP,GACd,GAAIS,GAAmBT,EAAMU,gBACzBC,EAAkBX,EAAM/B,cAsB5B,OApBA+B,GAAMU,gBAAkB,WAOpB,MANID,GACAA,EAAiB1I,KAAMiI,GAEvBA,EAAMY,cAAe,EAGlBZ,GAGXA,EAAM/B,eAAiB,WAOnB,MANI0C,GACAA,EAAgB5I,KAAMiI,GAEtBA,EAAMa,aAAc,EAGjBb,GAGJA,EA5SX,GAGIjE,GAAKE,EAHLqB,EAAQ5F,EAAQ,kBAChB0E,EAAe1E,EAAQ,mBACvByE,EAAkB,aAgTtBjE,GAAOJ,QAAU8D,IAEdkF,kBAAkB,GAAGC,iBAAiB,KAAKC,GAAG,SAAStJ,EAAQQ,GAClEA,EAAOJ,QAAU,0HACXmJ,GAAG,SAASvJ,EAAQQ,GAO1B,QAASgJ,GAAyBrF,EAAeC,EAAgBtC,GAC7D,IAAIA,EAAO0C,SAAX,CAEAoB,EAAM6D,cAAe7D,EAAM8D,OAAQC,GAAyB/D,EAAMC,KAAMzB,EAAgB,QAAS,GAEjG,IAAIwF,GAAWC,EAAkBC,EAAsC,SAAvBhI,EAAOoB,aAEnDkE,EAAKxB,EAAM8D,OAAQK,EAAerC,QAAS,WAAYkC,GAE3D,IAAK9H,EAAOQ,SAAW,CACnB,GAAI0H,GAASpE,EAAMC,KAAMuB,EAAI,YAActF,EAAOQ,UAAW,EAC7D0H,GAAOzE,UAAYyE,EAAOzE,UAAY,UAG1C,MAAO6B,IAGX,QAASyC,GAAkBI,EAAOC,GAC9B,GAAIC,KACJ,KAAM,GAAIC,KAAMH,GAAQ,CACpB,GAAIxI,GAAOwI,EAAOG,EAElBD,GAAOrC,KAAMuC,EAAcD,EAAI3I,EAAMyI,IAGzC,MAAOC,GAAOG,KAAM,IAGxB,QAASD,GAAcD,EAAI3I,EAAMyI,GAC7B,GAAIC,GAASI,EACN7C,QAAS,WAAY0C,GACrB1C,QAAS,cAAejG,EAAKyE,OAC7BwB,QAAS,cAAejG,EAAK+I,OAC7B9C,QAAS,cAAgBwC,EAASzI,EAAKgJ,KAAOjF,SAAe/D,EAAKE,KAEzE,OAAOwI,GAzCX,GAAIvE,GAAQ5F,EAAQ,kBAChB8J,EAAgB9J,EAAQ,2BACxB+J,EAAiB/J,EAAQ,0BACzB2J,EAAwB3J,EAAQ,kCAChCuK,EAAsBvK,EAAQ,+BAwClCQ,GAAOJ,QAAUoJ,IAEdkB,yBAAyB,EAAEC,0BAA0B,EAAEC,+BAA+B,EAAEC,iCAAiC,EAAExB,iBAAiB,KAAKyB,GAAG,SAAS9K,EAAQQ,GACxKA,EAAOJ,QAAU,2FACX2K,GAAG,SAAS/K,EAAQQ,GAC1BA,EAAOJ,SACH4K,QACIrJ,KAAM,6BACN8I,KAAM,8BACNvE,MAAO,kBACPsE,MAAO,mBAEXS,KACItJ,KAAM,mDACNuE,MAAO,MACPsE,MAAO,8BAEXU,MACIvJ,KAAM,oDACNuE,MAAO,OACPsE,MAAO,2CAEXW,KACIxJ,KAAM,yBACNuE,MAAO,MACPsE,MAAO,gCAEXY,UACIzJ,KAAM,4EACN8I,KAAM,oFACNvE,MAAO,yBACPsE,MAAO,gCAITa,GAAG,SAASrL,EAAQQ,GAC1BA,EAAOJ,QAAU,yNACXkL,IAAI,SAAStL,EAAQQ,GAC3BA,EAAOJ,QAAU,wFACXmL,IAAI,SAASvL,EAAQQ,GAI3B,QAASgL,GAAuBrH,GAC5B,GAAIiD,GAAKxB,EAAMC,KAAM1B,EAAe,eAAgB,EAMpD,OAJKiD,KACDA,EAAKxB,EAAM8D,OAAQ+B,IAGhBrE,EAVX,GAAIxB,GAAQ5F,EAAQ,kBAChByL,EAAezL,EAAQ,uBAY3BQ,GAAOJ,QAAUoL,IAEdE,uBAAuB,GAAGrC,iBAAiB,KAAKsC,IAAI,SAAS3L,GAkDhE,QAAS4L,GAAkBC,EAAW/J,GACpC,GAAIsF,GAAKxB,EAAMC,KAAMiG,EAAMD,GAAY,EASvC,OARKzE,KACDA,EAAKxB,EAAM8D,OAAO,eAAgBmC,EAAW,QAGjDzE,EAAG7B,UAAYsG,GACT/J,EAAO0C,SAAW,iBAAmB,KACrC1C,EAAOY,OAAS,iBAAmB,IAElC0E,EAGT,QAAS2E,GAAe3E,EAAI4E,EAAUC,EAAmBC,EAAYpK,GAKjE,GAJA8D,EAAM6D,cAAeuC,EAAU5E,GAC3B6E,GAAmBrG,EAAM6D,cAAewC,EAAmB7E,GAC3D8E,GAAYtG,EAAM6D,cAAeyC,EAAY9E,GAE5CtF,EAAOS,QAAU,CAClB,GAAIgD,GAAY,QAAUzD,EAAOS,QAC7ByH,EAASpE,EAAMC,KAAMuB,EAAI7B,GAAY,EACzCyE,GAAOzE,WAAa,UACpB6B,EAAG7B,WAAa,IAAMA,EAAY,UAItCK,EAAMuG,eAAgBhI,EAAe2H,GA1EzC9L,EAAQ,eAGR,IAAI4F,GAAQ5F,EAAQ,kBAChB8L,EAAOlL,SAASkL,KAEhBhK,EAAS9B,EAAQ,wBAGjBmE,EAAgByH,EAAkB,cAAe9J,GAGjDsC,EAAiBpE,EAAQ,qBAAsBmE,EAAerC,GAG9DsK,EAAkBpM,EAAQ,qBAAsBmE,EAAeC,EAAgBtC,EAGnF9B,GAAQ,oBAAqBmE,EAAeC,EAAgBtC,EAG5D,EAAA,GAAIuK,GAAgBrM,EAAQ,mBAAoBmE,EAG5BnE,GAAQ,mBAAoBqM,EAAejI,EAAgBtC,GAQ/EiK,EAAe5H,EAAeC,EAAgBgI,EAAiBC,EAAevK,GAG9E9B,EAAQ,mBAAoBY,SAAUuD,EAAeC,EAAgBtC,GAGjElB,SAAS0L,eACT1L,SAAS0L,kBAsCVC,qBAAqB,EAAEC,eAAe,EAAEC,kBAAkB,EAAEC,oBAAoB,EAAEC,kBAAkB,GAAGC,mBAAmB,GAAGC,kBAAkB,GAAGC,oBAAoB,GAAGzD,iBAAiB,KAAK0D,IAAI,SAAS/M,EAAQQ,GACvNA,EAAOJ,QAAU,6EACX4M,IAAI,SAAShN,EAAQQ,GAC3BA,EAAOJ,QAAU,wHACX6M,IAAI,SAASjN,EAAQQ,GAS3B,QAAS0M,GAAwB/I,EAAeC,EAAgBtC,GACrC,SAAnBA,EAAOqL,UAEXvH,EAAM6D,cAAe7D,EAAM8D,OAAQ0D,EAAkB1F,QAAQ,WAAY5F,EAAOU,cAAgBoD,EAAMC,KAAMzB,EAAgB,QAAS,IAErIiJ,EAAIC,IAAKxL,EAAOU,YAAc+K,GAA0BzL,EAAO0L,QAAU,YAAc1L,EAAO0L,QAAU,IAAM,SAAUnF,GACpH,MAAKA,QAKDA,EAAKoF,cACLC,EAAiBvJ,EAAekE,QALlCsF,GAAgBxJ,MAU1B,QAASuJ,GAAiBtG,EAAI+F,GAC1B,GAAIS,GAAWhI,EAAMC,KAAMuB,EAAI,kBAAmB,GAC9CyG,EAAajI,EAAM8D,OAAQoE,GAC3BC,EAAcF,EAAW7M,qBAAqB,KAAK,EAEvD+M,GAAYC,aAAc,QAASb,EAAQM,cACvCN,EAAQc,WAAad,EAAQc,UAAU3N,SACvCyN,EAAY9H,UAAY,aAAckH,EAAQc,UAAW,uDAG7D,IAAIrE,GAAWC,EAAkBsD,EAAQlD,OACrCiE,EAAOtI,EAAM8D,OAAQyE,EAAczG,QAAS,WAAYkC,GAE5DhE,GAAMwI,oBAAqBP,EAAYD,GACvChI,EAAMyI,OAAQT,GACdhI,EAAMwI,oBAAqBF,EAAM9G,EAAGkH,WAGxC,QAASX,GAAgBvG,GACrB,GAAIyG,GAAajI,EAAMC,KAAMuB,EAAI,gBAAiB,EAClDxB,GAAMyI,OAAQR,GAGlB,QAAShE,GAAkBI,GACvB,GAAIE,KACJ,KAAM,GAAIjE,KAAS+D,GAAQ,CACvB,GAAItI,GAAOsI,EAAO/D,EAElBiE,GAAOrC,KAAMuC,EAAcnE,EAAOvE,IAGtC,MAAOwI,GAAOG,KAAM,IAGxB,QAASD,GAAcnE,EAAOvE,GAC1B,GAAIwI,GAASoE,EACR7G,QAAS,cAAexB,GACxBwB,QAAS,aAAc/F,EAE5B,OAAOwI,GAhEX,GAAIvE,GAAQ5F,EAAQ,kBAChBqN,EAAMrN,EAAQ,gBACdmO,EAAgBnO,EAAQ,yBACxB8N,EAAuB9N,EAAQ,iCAC/BoN,EAAoBpN,EAAQ,8BAC5BuO,EAAqBvO,EAAQ,+BAC7BuN,EAAwB,SA6D5B/M,GAAOJ,QAAU8M,IAEdsB,6BAA6B,GAAGC,wBAAwB,GAAGC,8BAA8B,GAAGC,gCAAgC,GAAGtF,iBAAiB,GAAGuF,eAAe,KAAKC,IAAI,SAAS7O,EAAQQ,GAC/LA,EAAOJ,QAAU,iDACX0O,IAAI,SAAS9O,EAAQQ,GAC3BA,EAAOJ,QAAU,sGACX2O,IAAI,SAAS/O,EAAQQ,GAC3BA,EAAOJ,QAAU,+aACX4O,IAAI,SAAShP,EAAQQ,GAK3B,QAASyO,GAAuB5C,EAAejI,EAAgBtC,GAC3D,GAAKA,EAAOkJ,OAAZ,CAEApF,EAAM6D,cAAe7D,EAAM8D,OAAQwF,GAAuBtJ,EAAMC,KAAMzB,EAAgB,QAAS,GAE/F,IAAI+K,GAASC,EAA4BjJ,OAAOC,SAAS4E,QAErDqE,EAAOC,EACN5H,QAAQ,aAAc,OACtBA,QAAQ,aAAc5F,EAAOkJ,OAAOtD,QAAS,KAAM,WACnDA,QAAQ,oBAAqB5F,EAAOyN,eAAiB,IACrD7H,QAAQ,sBAAuB5F,EAAO0N,iBAAmB,IACzD9H,QAAQ,SAAUyH,EAAO7H,GAAK,IAAII,QAAS,KAAM,WAElD+H,EAAgB7J,EAAM8D,OAAQ2F,EAIlC,OAFAK,GAAmBrD,EAAeoD,GAE3BA,GAGX,QAASC,GAAmBtI,EAAIuI,GAC5B,GAAIzB,GAAOtI,EAAMC,KAAMuB,EAAI,QAAS,EAEpC,OAAI8G,GACOtI,EAAMwI,oBAAqBuB,EAAYzB,OAGpDtI,GAAM6D,cAAekG,EAAYvI,EAAGwI,YAItC,QAASC,GAA6BjQ,GAClC,MAAOkQ,qBAAqBlQ,GAAK,IAAI8H,QAAS,MAAO,MAGzD,QAASqI,GAAaC,EAAKC,EAAMC,GAC7B,GAAI/N,GAAM0N,EAA4BI,GAClC7N,EAAQyN,EAA4BK,GACpCC,EAAWH,EAAI7N,EAEnB,OAAyB,mBAAbgO,QACRH,EAAI7N,GAAOC,IAIU,gBAAb+N,IAA0BA,EAAS7P,SAC3C0P,EAAI7N,IAASgO,QAGjBH,GAAI7N,GAAK2F,KAAM1F,IAInB,QAASgN,GAA4BgB,GAOnC,IANA,GAAIC,GACArF,EAAS,qBAETmE,EAASiB,EAAME,UAAU,GACzBN,KAEKK,EAAQrF,EAAOrH,KAAMwL,IAC3BY,EAAaC,EAAKK,EAAM,GAAIA,EAAM,GAGrC,OAAOL,GArET,GAAIpK,GAAQ5F,EAAQ,kBAChBsP,EAAetP,EAAQ,wBACvBkP,EAAsBlP,EAAQ,+BAuElCQ,GAAOJ,QAAU6O,IAEdsB,uBAAuB,GAAGC,+BAA+B,GAAGnH,iBAAiB,KAAKoH,IAAI,SAASzQ,EAAQQ,GAC1GA,EAAOJ,QAAU,wMACXsQ,IAAI,SAAS1Q,EAAQQ,GAC3BA,EAAOJ,QAAU,sNACXuQ,IAAI,SAAS3Q,EAAQQ,GAM3B,QAASoQ,GAAwBzM,EAAerC,GAC5C+O,EAAS1M,EAET,IAAI+J,GAAO,EAKX,OAJKpM,GAAO0C,WACR0J,EAAOrE,EAAkBiH,EAAqC,SAAvBhP,EAAOoB,cAG3C6N,EAAoB7C,EAAMpM,GAGrC,QAASiP,GAAoB7C,EAAMpM,GAC/B,GAAIkK,GAAWgF,EACNtJ,QAAS,WAAYwG,GACrBxG,QAAS,eAAgB5F,EAAOmP,MAAQ,0BAE7C7J,EAAKxB,EAAM8D,OAAQsC,EAMvB,OAJIlK,GAAO0C,WACPoB,EAAMC,KAAMuB,EAAI,QAAQ,GAAGpG,qBAAsB,SAAU,GAAGiF,UAAYnE,EAAO0C,UAG9E4C,EAGX,QAASyC,GAAkBI,EAAOC,GAC9B,GAAIC,KACJ,KAAM,GAAIC,KAAMH,GAAQ,CACpB,GAAIxI,GAAOwI,EAAMG,EAEjBD,GAAOrC,KAAMuC,EAAcD,EAAI3I,EAAMyI,IAGzC,MAAOC,GAAOG,KAAM,IAGxB,QAASD,GAAcD,EAAI3I,EAAMyI,GAC7B,GAAIC,GAAS+G,EACNxJ,QAAS,WAAY0C,GACrB1C,QAAS,cAAejG,EAAKyE,OAC7BwB,QAAS,cAAejG,EAAK+I,OAC7B9C,QAAS,cAAgBwC,EAASzI,EAAKgJ,KAAOjF,SAAe/D,EAAKE,KAEzE,OAAOwI,GAGX,QAAS0G,GAAS1M,GACd,GAAIgN,GAAavL,EAAMC,KAAM1B,EAAe,iBAAkB,EAE1DgN,IACAA,EAAW1L,WAAW2L,YAAaD,GAvD3C,GAAIvL,GAAQ5F,EAAQ,kBAChB8Q,EAAe9Q,EAAQ,2BACvBgR,EAAiBhR,EAAQ,0BACzBkR,EAAsBlR,EAAQ,+BAwDlCQ,GAAOJ,QAAUwQ,IAEdS,yBAAyB,GAAGC,0BAA0B,GAAGC,+BAA+B,GAAGlI,iBAAiB,KAAKmI,IAAI,SAASxR,EAAQQ,GACzIA,EAAOJ,QAAU,uMACXqR,IAAI,SAASzR,EAAQQ,GAC3BA,EAAOJ,SACHsR,UACI/P,KAAM,8BACNuE,MAAO,iBAEXyL,UACIhQ,KAAM,kCACNuE,MAAO,YAEX0L,WACIjQ,KAAM,kDACNuE,MAAO,uCAIT2L,IAAI,SAAS7R,EAAQQ,GAK3B,QAASsR,GAAc1K,GACnBd,KAAKyL,QAAU3K,EACfd,KAAKuF,UAAYmG,EAAgB5K,EAAG7B,WAEpCe,KAAK+B,KAAO4J,EAAuB7K,EAAG7B,WAEtC6B,EAAGP,MAAQP,KAGf,QAAS2L,GAAuBpG,GAC5B,OACQvJ,UAAWuJ,EAAU7I,QAAQkP,GAC7B/E,SAAUtB,EAAU7I,QAAQmP,GAC5BnH,QAASa,EAAU7I,QAAQoP,IAIvC,QAASJ,GAAgBnG,GACrB,MAAOA,GACFnE,QAAS,IAAMwK,EAAwB,IACvCxK,QAAS,IAAMyK,EAAuB,IACtCzK,QAAS,IAAM0K,EAAsB,IAzB9C,GAAIF,GAAyB,qBACzBC,EAAwB,oBACxBC,EAAuB,kBA0B3BN,GAAaO,WAETC,YAAa,WACT,GAAIzG,GAAYvF,KAAKuF,WACfvF,KAAK+B,KAAK/F,SAAW,IAAM4P,EAAyB,KACpD5L,KAAK+B,KAAK8E,QAAU,IAAMgF,EAAwB,KAClD7L,KAAK+B,KAAK2C,OAAS,IAAMoH,EAAuB,GAEtD9L,MAAKyL,QAAQxM,UAAYsG,GAG7B/E,eAAgB,WACZR,KAAK+B,KAAK/F,UAAYgE,KAAK+B,KAAK/F,SAC5BgE,KAAK+B,KAAK/F,WACVgE,KAAK+B,KAAK8E,SAAU,EACpB7G,KAAK+B,KAAK2C,QAAS,GAEvB1E,KAAKgM,eAGTvL,cAAe,WACXT,KAAK+B,KAAK8E,SAAW7G,KAAK+B,KAAK8E,QAC3B7G,KAAK+B,KAAK8E,UACV7G,KAAK+B,KAAK2C,QAAS,EACnB1E,KAAK+B,KAAK/F,UAAW,GAEzBgE,KAAKgM,eAGTtL,aAAc,WACVV,KAAK+B,KAAK2C,QAAU1E,KAAK+B,KAAK2C,OAC1B1E,KAAK+B,KAAK2C,SACV1E,KAAK+B,KAAK8E,SAAU,EACpB7G,KAAK+B,KAAK/F,UAAW,GAEzBgE,KAAKgM,eAGTnL,QAAS,WACLb,KAAK+B,KAAK8E,SAAU,EACpB7G,KAAKgM,gBAKb9R,EAAOJ,SACHuE,WAAY,SAAUyC,GAClB,GAAI0K,GAAc1K,UAIpBmL,IAAI,SAASvS,EAAQQ,GAC3B,GAAIoF,KAEJA,GAAMC,KAAO,SAAU2M,EAAMxH,GAMzB,QAASyH,GAA8BD,EAAMxH,GACzC,MAAOwH,GAAKE,uBAAuB1H,GAGvC,QAAS2H,GAA+BH,EAAMxH,GAC1C,GAAc4H,GAAUC,EAAS5S,EAA7B6S,EAAIN,EAA4BO,IAEpC,IAAIP,EAAKQ,iBACL,MAAOR,GAAKQ,iBAAiB,IAAMhI,EAGvC,IAAIwH,EAAKS,SAIL,IAHAJ,EAAU,6CAA+C7H,EAAS,OAClE4H,EAAWJ,EAAKS,SAASJ,EAASC,EAAG,KAAM,EAAG,MAEtC7S,EAAI2S,EAASM,eACjBH,EAAQjL,KAAK7H,OAEd,CACH2S,EAAWJ,EAAKxR,qBAAqB,KACrC6R,EAAU,GAAInP,QAAO,UAAYsH,EAAS,UAE1C,IAAI/I,GAAM2Q,EAAStS,MACnB,KAAKL,EAAI,EAAOgC,EAAJhC,EAASA,IACZ4S,EAAQM,KAAKP,EAAS3S,GAAGsF,YAC1BwN,EAAQjL,KAAK8K,EAAS3S,IAKlC,MAAO8S,GAnCX,GAAIlN,GAAOjF,SAAS8R,uBAAyBD,EAA+BE,CAG5E,OAFA/M,GAAMC,KAAOA,EAENA,EAAM2M,EAAMxH,IAoCvBpF,EAAM8D,OAAS,SAAU0J,GACrB,KAAMA,EAAKpQ,QAAQ,KACf,MAAOpC,UAASM,cAAekS,EAGnC,IAAIC,GAAUzS,SAASM,cAAc,MAIrC,OAFAmS,GAAQpN,UAAYmN,EAEbC,EAAQzD,YAGnBhK,EAAMyI,OAAS,SAAU0D,GACrBA,EAAQtM,WAAW2L,YAAaW,IAGpCnM,EAAMuG,eAAiB,SAAU4F,EAASuB,GACtCA,EAAOC,aAAcxB,EAASuB,EAAO1D,aAGzChK,EAAMwI,oBAAsB,SAAU2D,EAASyB,GAC3C,GAAIF,GAASE,EAAQ/N,UAErB6N,GAAOC,aAAcxB,EAASyB,IAGlC5N,EAAM6D,cAAgB,SAAUsI,EAASuB,GACrCA,EAAOjS,YAAa0Q,IAGxBvR,EAAOJ,QAAUwF,OAEX6N,IAAI,SAASzT,EAAQQ,GAC3B,GAAIoF,GAAQ5F,EAAQ,kBAChBqN,IAEJA,GAAIC,IAAM,SAAU9L,EAAKkS,GACrB,GAAI5H,GAAOlL,SAASkL,KAChB6H,EAAS/S,SAASM,cAAc,SACpCyS,GAAO7Q,IAAMtB,IAASA,EAAIwB,QAAQ,KAAO,IAAM,KAAQ4Q,KAAKC,MAAsB,KAAhBD,KAAKE,SAGvE,IAAIC,IAAO,CAGXJ,GAAOK,OAASL,EAAOM,mBAAqB,WAClCF,GAAUzN,KAAK4N,YAAkC,WAApB5N,KAAK4N,YAA+C,aAApB5N,KAAK4N,aACpEH,GAAO,EACPL,EAASvN,OAAOgO,KAGhBR,EAAOK,OAASL,EAAOM,mBAAqB,KACvCnI,GAAQ6H,EAAOlO,YAChBqG,EAAKsF,YAAauC,KAK9B/N,EAAMuG,eAAgBwH,EAAQ7H,IAGlCtL,EAAOJ,QAAUiN,IAEdhE,iBAAiB,UAAU"}