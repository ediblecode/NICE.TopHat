{"version":3,"file":"tophat.js","sources":["tophat.dev.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","css","customDocument","doc","document","createStyleSheet","cssText","head","getElementsByTagName","style","createElement","type","styleSheet","appendChild","createTextNode","byUrl","url","link","rel","href",2,"getTophatConfig","config","tag","getTophatScriptTag","len","attributes","key","value","getAttribute","evidence","service","accountsUrl","generateAccountsUrl","legacy","isLegacy","currentScript","tags","src","toLowerCase","indexOf","env","environment","accountsDomain","accountsDomains","navigator","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","local",3,"search","label","title","bnf","bnfc","cks","journals",4,"pathways","guidance","standards",5,"tophatEvents","tophatElement","serviceElement","add","addEventListener","prefix","internal","tophatClassname","StateControl","forElement","attachTophatEvents","attachDomEvent","proxy","clickhandler","cancelhandler","trackingHandler","searchHandler","ev","target","srcElement","validateTrackedElement","className","undefined","parentNode","category","labelEl","utils","find","action","textContent","innerText","innerHTML","window","location","cleanClass","this","preventDefault","sendTrackedEvent","isTrackedElement","nodeName","validateTarget","mustIgnoreEvent","blur","state","toggleEvidence","toggleProfile","toggleMobileMenu","isValid","isTophatElement","unfocus","el","tophatEvent","q","placeholder","term","escape","replace","cb","setTimeout","dataLayer","push","sendDataLayerEvent","_gaq","sendGAEvent","ga","sendUAEvent","logEventToConsole","data","event","eventCategory","eventAction","eventLabel","console","log","fn","enhance","context","_stopPropagation","stopPropagation","_preventDefault","cancelBubble","returnValue","../utils/dom","./states",6,"TophatStates","element","classname","cleanClassname","getStateFromClassname","evidenceStateClassname","profile","profileStateClassname","mobile","mobileStateClassname","prototype","updateState",7,"generateEvidenceElement","appendElement","create","tophatEvidenceService","linklist","generateLinkList","evidenceLinks","tophatEvidence","active","links","isBeta","output","id","generateLink","join","tophatEvidenceLinks","beta","../config/evidence","../templates/evidence/links.html","../templates/evidence/menu.html","../templates/evidence/service.html",8,"generateGlobalElement","tophatGlobal","../templates/global/menu.html",9,"generateProfileElement","insertBeforeElement","tophatProfileAnon","xhr","get","tophatProfileEndpoint","wtrealm","display_name","generateProfile","generateAnonProfile","disableProfile","anonitem","profileLink","tophatProfileService","setAttribute","thumbnail","menu","tophatProfile","remove","lastChild","profilenav","tophatProfileLinks","../templates/profile/anon.html","../templates/profile/links.html","../templates/profile/menu.html","../templates/profile/service.html","../utils/xhr",10,"generateSearchElement","globalElement","params","parseQueryStringWithRegExp","view","tophatSearch","typeaheadtype","typeaheadsource","searchElement","addSearchToGlobal","searchForm","firstChild","decodeURIComponentExtended","decodeURIComponent","unescape","extendParam","obj","name","val","existing","query","match","substring","../templates/search/form.html",11,"generateServiceElement","cleanUp","serviceLinks","generateServiceBar","services","tophatServices","home","tophatServicesLinks","oldElement","removeChild","../config/services","../templates/services/links.html","../templates/services/menu.html",12,13,14,15,16,17,18,19,20,21,22,23,"/Users/matt/Documents/branches/NICE.Tophat/node_modules/cssify",24,"getTophatElement","body","composeTophat","evidenceResources","globalMenu","prependElement","evidenceElement","onTophatReady","./config","./events","./evidence","./global","./profile","./search","./services","./tophat.css","./utils/dom",25,"root","nativeGetElementsByClassName","getElementsByClassName","polyfilGetElementsByClassName","elements","pattern","d","results","querySelectorAll","evaluate","iterateNext","test","html","wrapper","parent","insertBefore","sibling",26,"resolve","script","Math","floor","random","done","onload","onreadystatechange","readyState","_na","./dom"],"mappings":"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"}