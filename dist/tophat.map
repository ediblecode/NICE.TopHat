{"version":3,"file":"tophat.js","sources":["tophat.dev.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","css","customDocument","doc","document","createStyleSheet","cssText","head","getElementsByTagName","style","createElement","type","styleSheet","appendChild","createTextNode","byUrl","url","link","rel","href",2,"getTophatConfig","config","tag","getTophatScriptTag","len","attributes","key","value","getAttribute","evidence","service","accountsUrl","generateAccountsUrl","legacy","isLegacy","currentScript","tags","src","toLowerCase","indexOf","env","environment","accountsDomain","accountsDomains","navigator","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","local",3,"search","label","title","bnf","bnfc","cks","journals",4,"pathways","guidance","standards",5,"tophatEvents","tophatElement","serviceElement","add","addEventListener","prefix","internal","tophatClassname","StateControl","forElement","attachTophatEvents","attachDomEvent","proxy","clickhandler","cancelhandler","trackingHandler","searchHandler","ev","target","srcElement","validateTrackedElement","className","undefined","parentNode","category","labelEl","utils","find","action","textContent","innerText","innerHTML","window","location","cleanClass","this","preventDefault","sendTrackedEvent","isTrackedElement","nodeName","validateTarget","mustIgnoreEvent","blur","state","toggleEvidence","toggleProfile","toggleMobileMenu","isValid","isTophatElement","unfocus","el","tophatEvent","q","placeholder","term","escape","replace","cb","setTimeout","dataLayer","push","sendDataLayerEvent","_gaq","sendGAEvent","ga","sendUAEvent","logEventToConsole","data","event","eventCategory","eventAction","eventLabel","console","log","fn","enhance","context","_stopPropagation","stopPropagation","_preventDefault","cancelBubble","returnValue","../utils/dom","./states",6,"TophatStates","element","classname","cleanClassname","getStateFromClassname","evidenceStateClassname","profile","profileStateClassname","mobile","mobileStateClassname","prototype","updateState",7,"generateEvidenceElement","appendElement","create","tophatEvidenceService","linklist","generateLinkList","evidenceLinks","tophatEvidence","active","links","isBeta","output","id","generateLink","join","tophatEvidenceLinks","beta","../config/evidence","../templates/evidence/links.html","../templates/evidence/menu.html","../templates/evidence/service.html",8,"generateGlobalElement","tophatGlobal","../templates/global/menu.html",9,"generateProfileElement","insertBeforeElement","tophatProfileAnon","xhr","get","tophatProfileEndpoint","wtrealm","display_name","generateProfile","generateAnonProfile","disableProfile","profileLink","setAttribute","thumbnail","menu","tophatProfile","anonitem","remove","lastChild","profilenav","tophatProfileLinks","../templates/profile/anon.html","../templates/profile/links.html","../templates/profile/menu.html","../templates/profile/service.html","../utils/xhr",10,"generateSearchElement","globalElement","params","parseQueryStringWithRegExp","view","tophatSearch","typeaheadtype","typeaheadsource","searchElement","addSearchToGlobal","searchForm","firstChild","decodeURIComponentExtended","decodeURIComponent","extendParam","obj","name","val","existing","query","match","substring","../templates/search/form.html",11,"generateServiceElement","cleanUp","serviceLinks","generateServiceBar","services","tophatServices","home","tophatServicesLinks","oldElement","removeChild","../config/services","../templates/services/links.html","../templates/services/menu.html",12,13,14,15,16,17,18,19,20,21,22,23,"/Users/matt/Documents/branches/NICE.Tophat/node_modules/cssify",24,"getTophatElement","body","composeTophat","evidenceResources","globalMenu","prependElement","evidenceElement","onTophatReady","./config","./events","./evidence","./global","./profile","./search","./services","./tophat.css","./utils/dom",25,"root","nativeGetElementsByClassName","getElementsByClassName","polyfilGetElementsByClassName","elements","pattern","d","results","querySelectorAll","evaluate","iterateNext","test","html","wrapper","parent","insertBefore","sibling",26,"resolve","script","Math","floor","random","done","onload","onreadystatechange","readyState","_na","./dom"],"mappings":"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"}